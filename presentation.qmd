---
title: "Final Project Presentation"
subtitle: "INFO 526 - Summer 2024 - Final Project"
author: "DataDuo"
title-slide-attributes:
  data-background-image: images/watercolour_sys02_img34_teacup-ocean.jpg
  data-background-size: stretch
  data-background-opacity: "0.7"
  data-slide-number: none
format:
  revealjs:
    theme:  ['data/customtheming.scss']
  
editor: visual
execute:
  echo: false
---

```{r}
#| label: load-packages
#| include: false

if (!require("pacman")) {
  install.packages("pacman")
}
# use this line for installing/loading
#pacman::p_load() 
pacman::p_load(tidymodels,
               tidyverse,
               readr,
               dplyr,
               ggplot2,
               lubridate)
if (!require("devtools")) {
  install.packages("devtools")
}

library(tidymodels)
library(tidyverse)
library(readr)
library(dplyr)
library(ggplot2)
library(lubridate)



```

```{r}
#| label: setup
#| include: false

# Plot theme
ggplot2::theme_set(ggplot2::theme_minimal(base_size = 11))

# For better figure resolution
knitr::opts_chunk$set(
  fig.retina = 3, 
  dpi = 300, 
  fig.width = 6, 
  fig.asp = 0.618 
  )
```

```{r}
#| label: load-data
#| include: false


polling_places <- read_csv("data/polling_places.csv")

data("polling_places")
```

## Introduction

The accessibility of polling places is a critical factor in ensuring that all eligible voters can participate in the democratic process. The availability and distribution of polling places can significantly impact voter turnout and influence the overall effectiveness of an election. This project aims to analyze the trends in polling place availability across the United States from 2012 to 2020, with a specific focus on temporal changes and geographic disparities. By examining national and state-level data, as well as differences between urban and rural areas, this project seeks to understand the factors influencing polling place changes and their impact on voter accessibility. Through this analysis, we hope to provide insights that can inform policies to enhance voter access and participation in future elections.

## Data Sources

-   The polling places data used in this presentation originates from " The Center for Public Integrity".

-   The dataset was featured in their September 2020 article titled "National data release sheds light on past polling place changes".

## Data Cleaning and Preparation

-   Transformed `election_date` into Date format using `as.Date()` to ensure uniform date handling across the dataset.

-   Filled missing values in `location_type` by assigning the mode of existing values, ensuring consistency in categorization.

-   Assigned "Unknown" to records with missing `precinct_name` to maintain dataset completeness.

-   Removed duplicate rows from the dataset.

## New columns added

-   year: Extracted from election_date using lubridate::year().

-   area_type: Categorized based on jurisdiction_type into "urban" or "rural".

-   number_of_polling_places: Categorized based on jurisdiction_type into "urban" or "rural". voter_turnout_rate: Assigned a fixed rate of 65%.

-   voter_turnout_count: Calculated as number_of_polling_places multiplied by 0.65.

## Questions to answer

The two questions we want to answer.

Question 1 : What are the trends in the number of polling places over time, both nationally and across different states from 2012 to 2020?

Question 2 : How does the availability of polling places vary between urban and rural areas, and what impact does this disparity have on voter turnout?

## Code

## Question 2

```{r}

original_dataset <- read_csv("data/original_dataset.csv")


original_dataset <- original_dataset %>%
  mutate(year = year(election_date))

#calculating polling places
polling_places_summary <- original_dataset %>%
  group_by(state, year) %>%
  summarise(number_of_polling_places = n_distinct(precinct_name))


original_dataset <- merge(original_dataset, polling_places_summary, by = c("state", "year"))

na_indices <- which(is.na(original_dataset$jurisdiction_type))


original_dataset$jurisdiction_type <- trimws(original_dataset$jurisdiction_type)


patterns <- c("Calumet | Town of Harrison", "Marinette | Village of Wausaukee", 
              "Outagamie | City of Seymour", "Taylor | Town of Medford", 
              "Adams | Town Of Adams", "Dodge | Village of Lomira", 
              "Dunn | Town of Tainter", "Eau Claire | Town of Bridge Creek", 
              "Eau Claire | City of Augusta", "Eau Claire | City of Altoona", 
              "Iowa | Town of Brigham", "Lafayette | City of Darlington", 
              "Oneida | Town of Hazelhurst", "Washburn | City of Shell Lake", 
              "Adams | CITY OF ADAMS")

replacements <- c("town", "village", "city", "town", "town", "village", 
                  "town", "town", "city", "city", "town", "city", "town", 
                  "city", "city")

for (i in seq_along(patterns)) {
  original_dataset$jurisdiction_type[grepl(patterns[i], original_dataset$jurisdiction)] <- replacements[i]
}




original_dataset$area_type <- ifelse(original_dataset$jurisdiction_type %in% c("borough", "city", "municipality"),
                                     "urban",
                                     ifelse(original_dataset$jurisdiction_type %in% c("county", "town", "parish", "county_municipality", "village"),
                                            "rural", 
                                            NA ))




original_dataset$voter_turnout_rate <- rep(65, nrow(original_dataset))
original_dataset$voter_turnout_count <- round(original_dataset$number_of_polling_places * 0.65)




polling_places_area_type <- original_dataset %>%
  group_by(area_type, state, year) %>%
  summarise(number_of_polling_places = n_distinct(precinct_name))


ggplot(polling_places_area_type, aes(x=area_type, y=number_of_polling_places, fill=area_type)) +
  geom_bar(stat="identity", position="dodge") +
  facet_wrap(~year) +
  ggtitle("Distribution of Polling Places (Urban vs Rural)") +
  xlab("Area Type") +
  ylab("Number of Polling Places")


voter_turnout_comparison <- original_dataset %>%
  group_by(area_type) %>%
  summarise(average_turnout = mean(voter_turnout_rate, na.rm=TRUE))


ggplot(voter_turnout_comparison, aes(x=area_type, y=average_turnout, fill=area_type)) +
  geom_bar(stat="identity", position="dodge") +
  ggtitle("Voter Turnout Rate Comparison (Urban vs Rural)") +
  xlab("Area Type") +
  ylab("Average Voter Turnout Rate")



```

```         
{r}
```

## Plots

```         
```

## Plot and text

::: columns
::: {.column width="50%"}
-   Some text

-   goes here
:::

::: {.column width="50%"}
```         
```
:::
:::

# A new section...

## Tables

If you want to generate a table, make sure it is in the HTML format (instead of Markdown or other formats), e.g.,

```         
```

## Images

![Image credit: Danielle Navarro, Percolate.](images/watercolour_sys02_img34_teacup-ocean.png){fig-align="center" width="500"}

## Math Expressions {.smaller}

You can write LaTeX math expressions inside a pair of dollar signs, e.g.Â \$\\alpha+\\beta\$ renders $\alpha + \beta$. You can use the display style with double dollar signs:

```         
$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$
```

$$
\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i
$$

Limitations:

1.  The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

2.  There should not be spaces after the opening `$` or before the closing `$`.

# Wrap up

## Feeling adventurous?

-   You are welcomed to use the default styling of the slides. In fact, that's what I expect majority of you will do. You will differentiate yourself with the content of your presentation.

-   But some of you might want to play around with slide styling. Some solutions for this can be found at https://quarto.org/docs/presentations/revealjs.
