---
title: "Final Project Presentation"
subtitle: "INFO 526 - Summer 2024 - Final Project"
author: "DataDuo"
title-slide-attributes:
  data-background-image: images/watercolour_sys02_img34_teacup-ocean.jpg
  data-background-size: stretch
  data-background-opacity: "0.7"
  data-slide-number: none
format:
  revealjs:
    theme:  ['data/customtheming.scss']
  
editor: visual
execute:
  echo: false
---

```{r}
#| label: load-packages
#| include: false

if (!require("pacman")) {
  install.packages("pacman")
}
# use this line for installing/loading
#pacman::p_load() 
pacman::p_load(tidymodels,
               tidyverse,
               readr,
               dplyr,
               ggplot2)
if (!require("devtools")) {
  install.packages("devtools")
}

library(tidymodels)
library(tidyverse)
library(readr)
library(dplyr)
library(ggplot2)



```

```{r}
#| label: setup
#| include: false

# Plot theme
ggplot2::theme_set(ggplot2::theme_minimal(base_size = 11))

# For better figure resolution
knitr::opts_chunk$set(
  fig.retina = 3, 
  dpi = 300, 
  fig.width = 6, 
  fig.asp = 0.618 
  )
```

```{r}
#| label: load-data
#| include: false


polling_places <- read_csv("data/polling_places.csv")

data("polling_places")
```

## Introduction

The accessibility of polling places is a critical factor in ensuring that all eligible voters can participate in the democratic process. The availability and distribution of polling places can significantly impact voter turnout and influence the overall effectiveness of an election. This project aims to analyze the trends in polling place availability across the United States from 2012 to 2020, with a specific focus on temporal changes and geographic disparities. By examining national and state-level data, as well as differences between urban and rural areas, this project seeks to understand the factors influencing polling place changes and their impact on voter accessibility. Through this analysis, we hope to provide insights that can inform policies to enhance voter access and participation in future elections.

```{r}

library(ggplot2)
library(maps)
library(dplyr)

polling_places <- read.csv("data/polling_places.csv")

unique_regions <- unique(map_data$region)
unique_states <- unique(polling_places$state)

print(unique_regions)
print(unique_states)

state_name_to_abbr <- c(
  "alabama" = "AL", "arizona" = "AZ", "arkansas" = "AR", "california" = "CA", 
  "colorado" = "CO", "connecticut" = "CT", "delaware" = "DE", 
  "district of columbia" = "DC", "florida" = "FL", "georgia" = "GA", 
  "idaho" = "ID", "illinois" = "IL", "indiana" = "IN", "iowa" = "IA", 
  "kansas" = "KS", "kentucky" = "KY", "louisiana" = "LA", "maine" = "ME", 
  "maryland" = "MD", "massachusetts" = "MA", "michigan" = "MI", 
  "minnesota" = "MN", "mississippi" = "MS", "missouri" = "MO", 
  "montana" = "MT", "nebraska" = "NE", "nevada" = "NV", "new hampshire" = "NH", 
  "new jersey" = "NJ", "new mexico" = "NM", "new york" = "NY", 
  "north carolina" = "NC", "north dakota" = "ND", "ohio" = "OH", 
  "oklahoma" = "OK", "oregon" = "OR", "pennsylvania" = "PA", 
  "rhode island" = "RI", "south carolina" = "SC", "south dakota" = "SD", 
  "tennessee" = "TN", "texas" = "TX", "utah" = "UT", "vermont" = "VT", 
  "virginia" = "VA", "washington" = "WA", "west virginia" = "WV", 
  "wisconsin" = "WI", "wyoming" = "WY"
)


polling_places_summary <- polling_places %>%
  group_by(state) %>%
  summarise(polling_places_count = n())

print(polling_places_summary)

usa <- map_data("state")

map_data <- merge(usa, polling_places_summary, by.x = "region", by.y = "state", all.x = TRUE)

str(map_data)

ggplot() +
  geom_map(data = map_data, map = map_data,
           aes(x = long, y = lat, map_id = region, fill = polling_places_count),
           color = "black", size = 0.2) +
  labs(title = "Polling Places Distribution by State") +
  theme_minimal() +
  theme(legend.position = "right")

``
```

## Data Sources

-   The polling places data used in this presentation originates from " The Center for Public Integrity".

-   The dataset was featured in their September 2020 article titled "National data release sheds light on past polling place changes".

## Data Cleaning and Preparation

-   Transformed `election_date` into Date format using `as.Date()` to ensure uniform date handling across the dataset.

-   Filled missing values in `location_type` by assigning the mode of existing values, ensuring consistency in categorization.

-   Assigned "Unknown" to records with missing `precinct_name` to maintain dataset completeness.

-   Removed duplicate rows from the dataset.

    ## New columns Added

    -   **year:** Extracted from `election_date` using `lubridate::year()`.

    -   **area_type:** Categorized based on `jurisdiction_type` into "urban" or "rural".

    -   **number_of_polling_places:** Calculated as the count of distinct `precinct_name` grouped by `state` and `year`.

    -   **voter_turnout_rate:** Assigned a fixed rate of 65%.

    -   **voter_turnout_count:** Calculated as `number_of_polling_places` multiplied by 0.65.

::: columns
::: {.column width="40%"}
-   or bullet points[^1]
:::

::: {.column width="60%"}
or in two columns
:::
:::

[^1]: And add footnotes

-   like

-   this

## Code

```{r, echo=FALSE}
model <- lm(mpg ~ speed, data = mtcars) 

model |> tidy()

model |> glance()

```

## Plots

```{r}
penguins |>
  mutate(species = ifelse(species == "Adelie", "Adelie", "Other")) |>
  ggplot(aes(x = flipper_length_mm, y = body_mass_g, color = species)) +
  geom_point()
```

## Plot and text

::: columns
::: {.column width="50%"}
-   Some text

-   goes here
:::

::: {.column width="50%"}
```{r, warning=FALSE, fig.width=5.5}
penguins |>
  ggplot(aes(x = bill_length_mm, y = species, color = species)) +
  geom_boxplot(linewidth = 0.75,
               outlier.size = 2.5) +
  theme_minimal(base_size = 15) +
  theme(legend.key.size = unit(0.8, "cm"))
```
:::
:::

# A new section...

## Tables

If you want to generate a table, make sure it is in the HTML format (instead of Markdown or other formats), e.g.,

```{r}
penguins |> 
  head() |>
  kableExtra::kable() |>
  kableExtra::kable_styling()
```

## Images

![Image credit: Danielle Navarro, Percolate.](images/watercolour_sys02_img34_teacup-ocean.png){fig-align="center" width="500"}

## Math Expressions {.smaller}

You can write LaTeX math expressions inside a pair of dollar signs, e.g.Â \$\\alpha+\\beta\$ renders $\alpha + \beta$. You can use the display style with double dollar signs:

```         
$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$
```

$$
\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i
$$

Limitations:

1.  The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

2.  There should not be spaces after the opening `$` or before the closing `$`.

# Wrap up

## Feeling adventurous?

-   You are welcomed to use the default styling of the slides. In fact, that's what I expect majority of you will do. You will differentiate yourself with the content of your presentation.

-   But some of you might want to play around with slide styling. Some solutions for this can be found at https://quarto.org/docs/presentations/revealjs.
